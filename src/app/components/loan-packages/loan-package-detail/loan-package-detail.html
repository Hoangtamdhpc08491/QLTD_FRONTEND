<!-- Header -->
<app-header></app-header>

<!-- Loading State -->
<div *ngIf="loading" class="loading-state">
  <div class="container">
    <div class="loading-spinner"></div>
    <p>ƒêang t·∫£i th√¥ng tin g√≥i vay...</p>
  </div>
</div>

<!-- Error State -->
<div *ngIf="error && !loading" class="error-state">
  <div class="container">
    <div class="error-message">
      <span class="error-icon">‚ö†Ô∏è</span>
      <p>{{error}}</p>
      <button class="btn btn-primary" (click)="loadLoanPackage()">Th·ª≠ l·∫°i</button>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="loan-detail-page" *ngIf="loanPackage && !loading && !error">
  <!-- Page Header -->
  <section class="page-header">
    <div class="page-header-bg"></div>
    <div class="container">
      <nav class="breadcrumb">
        <a [routerLink]="'/'" class="breadcrumb-item">Trang ch·ªß</a>
        <span class="breadcrumb-separator">/</span>
        <a [routerLink]="'/goi-vay'" class="breadcrumb-item">G√≥i vay</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-item active">{{loanPackage.name}}</span>
      </nav>
      <div class="page-header-content">
        <div class="package-icon-large">
          <span class="icon-emoji">{{getPackageIcon(loanPackage.name)}}</span>
        </div>
        <div class="header-text">
          <h1 class="page-title">{{loanPackage.name}}</h1>
          <p class="page-subtitle">{{loanPackage.description1}}</p>
          <div class="header-features">
            <div class="feature-badge">
              <span class="feature-label">L√£i su·∫•t t·ª´</span>
              <span class="feature-value">{{getInterestRateText(loanPackage.baseInterestRate)}}</span>
            </div>
            <div class="feature-badge" *ngIf="loanPackage.category">
              <span class="feature-label">Danh m·ª•c</span>
              <span class="feature-value">{{loanPackage.category.name}}</span>
            </div>
            <div class="feature-badge">
              <span class="feature-label">Ng√†y t·∫°o</span>
              <span class="feature-value">{{formatDate(loanPackage.createdAt)}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="main-content">
    <div class="container">
      <div class="content-grid">
        <!-- Left Column -->
        <div class="content-main">
          <!-- Overview -->
          <div class="content-section">
            <h2 class="section-title">T·ªïng quan g√≥i vay</h2>
            <p class="section-content">{{loanPackage.description1}}</p>
            <div *ngIf="loanPackage.description2" class="section-content">
              <p>{{loanPackage.description2}}</p>
            </div>
            <div *ngIf="loanPackage.description3" class="section-content">
              <p>{{loanPackage.description3}}</p>
            </div>
          </div>

          <!-- Advantages -->
          <div class="content-section">
            <h2 class="section-title">∆Øu ƒëi·ªÉm n·ªïi b·∫≠t</h2>
            <div class="advantages-grid">
              <div class="advantage-item" *ngFor="let advantage of getMockAdvantages()">
                <div class="advantage-icon">‚úì</div>
                <span>{{advantage}}</span>
              </div>
            </div>
          </div>

          <!-- Process -->
          <div class="content-section">
            <h2 class="section-title">Quy tr√¨nh vay v·ªën</h2>
            <div class="process-steps">
              <div class="process-step" *ngFor="let step of getMockProcess()">
                <div class="step-number">{{step.buoc}}</div>
                <div class="step-icon">{{step.icon}}</div>
                <div class="step-content">
                  <h4>{{step.tieuDe}}</h4>
                  <p>{{step.moTa}}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Requirements -->
          <div class="content-section">
            <h2 class="section-title">Y√™u c·∫ßu h·ªì s∆°</h2>
            <div class="requirements-list">
              <div class="requirement-item" *ngFor="let requirement of getMockRequirements()">
                <div class="requirement-icon">üìÑ</div>
                <span>{{requirement}}</span>
              </div>
            </div>
          </div>

          <!-- Interest Rates -->
          <div class="content-section" *ngIf="loanPackage.interestRate2 || loanPackage.interestRate3">
            <h2 class="section-title">B·∫£ng l√£i su·∫•t</h2>
            <div class="interest-rates-table">
              <div class="rate-item">
                <span class="rate-label">L√£i su·∫•t c∆° b·∫£n:</span>
                <span class="rate-value highlight">{{getInterestRateText(loanPackage.baseInterestRate)}}</span>
              </div>
              <div class="rate-item" *ngIf="loanPackage.interestRate2">
                <span class="rate-label">L√£i su·∫•t ∆∞u ƒë√£i:</span>
                <span class="rate-value">{{getInterestRateText(loanPackage.interestRate2)}}</span>
              </div>
              <div class="rate-item" *ngIf="loanPackage.interestRate3">
                <span class="rate-label">L√£i su·∫•t ƒë·∫∑c bi·ªát:</span>
                <span class="rate-value">{{getInterestRateText(loanPackage.interestRate3)}}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Sidebar -->
        <div class="content-sidebar">
          <!-- Quick Info Card -->
          <div class="info-card">
            <h3 class="card-title">Th√¥ng tin chi ti·∫øt</h3>
            <div class="info-items">
              <div class="info-item">
                <span class="info-label">M√£ g√≥i vay:</span>
                <span class="info-value">{{loanPackage.id}}</span>
              </div>
              <div class="info-item">
                <span class="info-label">L√£i su·∫•t c∆° b·∫£n:</span>
                <span class="info-value highlight">{{getInterestRateText(loanPackage.baseInterestRate)}}</span>
              </div>
              <div class="info-item" *ngIf="loanPackage.category">
                <span class="info-label">Danh m·ª•c:</span>
                <span class="info-value">{{loanPackage.category.name}}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Ng√†y t·∫°o:</span>
                <span class="info-value">{{formatDate(loanPackage.createdAt)}}</span>
              </div>
              <div class="info-item">
                <span class="info-label">Tr·∫°ng th√°i:</span>
                <span class="info-value" [class]="getPackageStatus() ? 'status-active' : 'status-inactive'">
                  {{getPackageStatus() ? 'ƒêang m·ªü' : 'T·∫°m ƒë√≥ng'}}
                </span>
              </div>
            </div>
          </div>

          <!-- Action Card -->
          <div class="action-card">
            <h3 class="card-title">ƒêƒÉng k√Ω ngay</h3>
            <p class="card-subtitle">B·∫Øt ƒë·∫ßu quy tr√¨nh vay v·ªën v·ªõi ch√∫ng t√¥i</p>
            <div class="action-buttons">
              <a [routerLink]="['/dang-ky-vay', loanPackage.id]" 
                 class="btn btn-primary btn-full">
                ƒêƒÉng k√Ω vay ngay
              </a>
              <a href="tel:+84123456789" class="btn btn-secondary btn-full">
                <span class="btn-icon">üìû</span>
                G·ªçi t∆∞ v·∫•n
              </a>
            </div>
          </div>
          <!-- Calculator Card -->
          <div class="calculator-card">
            <h3 class="card-title">T√≠nh to√°n kho·∫£n vay</h3>
            <p class="card-subtitle">∆Ø·ªõc t√≠nh s·ªë ti·ªÅn tr·∫£ h√†ng th√°ng</p>
            <div class="calculator-info">
              <div class="calc-item">
                <span class="calc-label">Vay 100 tri·ªáu trong 12 th√°ng:</span>
                <span class="calc-value">{{calculateMonthlyPayment(100000000, loanPackage.baseInterestRate, 12)}}/th√°ng</span>
              </div>
              <div class="calc-item">
                <span class="calc-label">Vay 200 tri·ªáu trong 24 th√°ng:</span>
                <span class="calc-value">{{calculateMonthlyPayment(200000000, loanPackage.baseInterestRate, 24)}}/th√°ng</span>
              </div>
            </div>
            <a [routerLink]="'/tinh-lai-suat'" class="btn btn-outline btn-full">
              M√°y t√≠nh chi ti·∫øt
            </a>
          </div>

          <!-- Contact Card -->
          <div class="contact-card">
            <h3 class="card-title">C·∫ßn h·ªó tr·ª£?</h3>
            <div class="contact-info">
              <div class="contact-item">
                <span class="contact-icon">üìû</span>
                <div class="contact-details">
                  <strong>Hotline</strong>
                  <span>+84 123 456 789</span>
                </div>
              </div>
              <div class="contact-item">
                <span class="contact-icon">‚úâÔ∏è</span>
                <div class="contact-details">
                  <strong>Email</strong>
                  <span>support&#64;pyloan.vn</span>
                </div>
              </div>
              <div class="contact-item">
                <span class="contact-icon">‚è∞</span>
                <div class="contact-details">
                  <strong>Gi·ªù l√†m vi·ªác</strong>
                  <span>24/7 - T·∫•t c·∫£ c√°c ng√†y</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Footer -->
<app-footer></app-footer>
<app-footer></app-footer>
