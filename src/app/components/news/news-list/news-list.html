<!-- Header -->
<app-header></app-header>

<div class="news-page">
  <!-- Page Header -->
  <section class="page-header">
    <div class="page-header-bg"></div>
    <div class="container">
      <nav class="breadcrumb">
        <a [routerLink]="'/'" class="breadcrumb-item">Trang chủ</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-item active">Tin tức</span>
      </nav>
      <h1 class="page-title">Tin Tức Tài Chính</h1>
      <p class="page-subtitle">Cập nhật những thông tin mới nhất về tài chính, vay vốn và đầu tư</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="news-content">
    <div class="container">
      <!-- Search and Filter -->
      <div class="filter-section">
        <div class="filter-row">
          <div class="search-box">
            <input 
              type="text" 
              [(ngModel)]="searchTerm"
              (keyup.enter)="onSearch()"
              placeholder="Tìm kiếm tin tức..."
              class="search-input">
            <button (click)="onSearch()" class="search-btn">
              <i class="fas fa-search"></i>
            </button>
          </div>
          
          <div class="category-filter">
            <select [(ngModel)]="selectedCategory" (change)="onCategoryChange()" class="category-select">
              <option [value]="null">Tất cả danh mục</option>
              <option *ngFor="let category of categories" [value]="category.id">
                {{category.name}}
              </option>
            </select>
          </div>
        </div>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Đang tải tin tức...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !isLoading" class="error-state">
        <div class="error-message">
          <i class="fas fa-exclamation-triangle"></i>
          <p>{{error}}</p>
          <button (click)="loadNews()" class="retry-btn">Thử lại</button>
        </div>
      </div>

      <!-- News List -->
      <div class="news-main" *ngIf="!isLoading && !error">
        <div class="news-grid" *ngIf="newsList.length > 0">
          <article class="news-card" *ngFor="let news of newsList">
            <div class="news-image">
              <img 
                [src]="news.thumbnail || '/assets/images/news/default-news.jpg'" 
                [alt]="news.title"
                class="news-thumbnail"
                loading="lazy">
              <div class="news-category-badge">
                {{getCategoryName(news.categoryId)}}
              </div>
            </div>
            
            <div class="news-content">
              <div class="news-meta">
                <span class="news-date">{{formatDate(news.timeUpload)}}</span>
                <span class="news-author" *ngIf="news.uploadBy">{{news.uploadBy}}</span>
              </div>
              
              <h3 class="news-title">
                <a [routerLink]="['/news', news.id]">{{news.title}}</a>
              </h3>
              
              <p class="news-excerpt">
                {{news.content | slice:0:150}}...
              </p>
              
              <div class="news-footer">
                <a [routerLink]="['/news', news.id]" class="read-more-btn">
                  Đọc thêm
                  <i class="fas fa-arrow-right"></i>
                </a>
              </div>
            </div>
          </article>
        </div>

        <!-- Empty State -->
        <div *ngIf="newsList.length === 0" class="empty-state">
          <div class="empty-message">
            <i class="fas fa-newspaper"></i>
            <h3>Không có tin tức nào</h3>
            <p>Hiện tại chưa có tin tức nào phù hợp với bộ lọc của bạn.</p>
          </div>
        </div>

        <!-- Pagination -->
        <div class="pagination-wrapper" *ngIf="totalPages > 1">
          <nav class="pagination">
            <button 
              class="pagination-btn"
              [disabled]="currentPage === 1"
              (click)="onPageChange(currentPage - 1)">
              <i class="fas fa-chevron-left"></i>
              Trước
            </button>
            
            <div class="pagination-numbers">
              <button 
                *ngFor="let page of getPaginationPages()"
                class="pagination-number"
                [class.active]="page === currentPage"
                (click)="onPageChange(page)">
                {{page}}
              </button>
            </div>
            
            <button 
              class="pagination-btn"
              [disabled]="currentPage === totalPages"
              (click)="onPageChange(currentPage + 1)">
              Sau
              <i class="fas fa-chevron-right"></i>
            </button>
          </nav>
          
          <div class="pagination-info">
            Hiển thị {{(currentPage - 1) * itemsPerPage + 1}} - 
            {{currentPage * itemsPerPage > totalItems ? totalItems : currentPage * itemsPerPage}} 
            trong tổng số {{totalItems}} tin tức
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Footer -->
<app-footer></app-footer>
